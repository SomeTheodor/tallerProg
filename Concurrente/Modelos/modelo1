programa ej1
procesos
  proceso juntarFlores(ES cant:numero)
  comenzar
    mientras HayFlorEnLaEsquina
      cant:=cant+1
      tomarFlor
  fin
  proceso juntarPapeles(ES cant:numero)
  comenzar
    mientras HayPapelEnLaEsquina
      cant:=cant+1
      tomarPapel
  fin
  proceso recorrerCa(ES cant:numero)
  comenzar
    repetir 98
      si((PosAv+1 = 2) | (PosAv+1 = 3))
        BloquearEsquina(PosAv+1,PosCa)
        mover
        juntarPapeles(cant)
        mover
        LiberarEsquina(PosAv-1,PosCa)
      sino
        juntarPapeles(cant)
        mover
  fin
  proceso recorrerAv(ES cant:numero)
  comenzar
    repetir 98
      si((PosCa+1 = 98) | (PosCa+1 = 99))
        BloquearEsquina(PosAv,PosCa+1)
        mover
        juntarFlores(cant)
        mover
        LiberarEsquina(PosAv,PosCa-1)
      sino
        juntarFlores(cant)
        mover
  fin
  proceso recibirCantidades(ES cantA:numero; ES cantR:numero)
  variables
    id,cant:numero
  comenzar
    repetir 4
      RecibirMensaje(id,*)
      si(id = 1)
        RecibirMensaje(cantA,r1A)
      sino
        si(id = 2)
          RecibirMensaje(cant,r2A)
          cantA:= cantA+cant
        sino
          si(id = 3)
            RecibirMensaje(cantR,r1R)
          sino
            si(id = 4)
              RecibirMensaje(cant,r2R)
              cantR:= cantR+cant
  fin
  proceso enviarIds
  comenzar
    EnviarMensaje(1,r1A)
    EnviarMensaje(2,r2A)
    EnviarMensaje(3,r1R)
    EnviarMensaje(4,r2R)
  fin
areas
  c1A: AreaP (2,1,2,100)
  c2A: AreaP (3,1,3,100)
  c1R: AreaP (1,98,100,98)
  c2R: AreaP (1,99,100,99)
  cF: AreaP (1,1,1,1)
robots
  robot equipoA
  variables
    id,cant:numero
  comenzar
    RecibirMensaje(id,rF)
    cant:=0
    recorrerAv(cant)
    EnviarMensaje(id,rF)
    EnviarMensaje(cant,rF)
  fin
  robot equipoR
  variables
    id,cant:numero
  comenzar
    RecibirMensaje(id,rF)
    cant:=0
    derecha
    recorrerCa(cant)
    EnviarMensaje(id,rF)
    EnviarMensaje(cant,rF)
  fin
  robot fiscalizador
  variables
    cantA,cantR:numero
  comenzar
    enviarIds
    recibirCantidades(cantA,cantR)
    si(cantA > cantR)
      Informar('Gano el equipo A con', cantA)
    sino
      Informar('Gano el equipo R con', cantR)
  fin
variables
  r1A: equipoA
  r2A: equipoA
  r1R: equipoR
  r2R: equipoR
  rF: fiscalizador
comenzar
  AsignarArea(r1A, c1A)
  AsignarArea(r2A, c2A)
  AsignarArea(r1R, c1R)
  AsignarArea(r2R, c2R)
  AsignarArea(rF, cF)
  Iniciar(r1A, 2,1)
  Iniciar(r2A, 3,1)
  Iniciar(r1R, 1,98)
  Iniciar(r2R, 1,99)
  Iniciar(rF, 1,1)
fin