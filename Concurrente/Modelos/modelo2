programa ej2
procesos
  proceso juntarFlores
  comenzar
    mientras HayFlorEnLaEsquina
      tomarFlor
  fin
  proceso recorrerCa
  comenzar
    repetir 9
      juntarFlores
      mover
  fin
  proceso depositarFlores
  variables
    av,ca:numero
  comenzar
    av:=PosAv
    ca:= PosCa
    mientras HayFlorEnLaBolsa
      BloquearEsquina(50,50)
      Pos(50,50)
      depositarFlor
      Pos(av,ca)
      LiberarEsquina(50,50)
  fin
areas
  c1: AreaP (1,1,100,1)
  c2: AreaP (1,2,100,2)
  c3: AreaP (1,3,100,3)
  cF: AreaP (1,4,1,4)
  dep: AreaC (50,50,50,50)
robots
  robot recolector
  variables
    ok:boolean
  comenzar
    derecha
    repetir 11
      recorrerCa
      depositarFlores
      EnviarMensaje(ok,rF)
      RecibirMensaje(ok,rF)
  fin
  robot fiscalizador
  variables
    ok:boolean
    cant:numero
  comenzar
    repetir 11
      repetir 3
        RecibirMensaje(ok,*)
      EnviarMensaje(V,r1)
      EnviarMensaje(V,r2)
      EnviarMensaje(V,r3)
    Pos(50,50)
    cant:=0
    mientras HayFlorEnLaEsquina
      tomarFlor
      cant:= cant+1
    Informar('Cant de flores',cant)
  fin
variables
  r1: recolector
  r2: recolector
  r3: recolector
  rF: fiscalizador
comenzar
  AsignarArea(r1, c1)
  AsignarArea(r2, c2)
  AsignarArea(r3, c3)
  AsignarArea(rF, cF)
  AsignarArea(r1, dep)
  AsignarArea(r2, dep)
  AsignarArea(r3, dep)
  AsignarArea(rF, dep)
  Iniciar(r1, 1,1)
  Iniciar(r2, 1,2)
  Iniciar(r3, 1,3)
  Iniciar(rF, 1,4)
fin