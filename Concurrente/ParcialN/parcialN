programa parcialN
procesos
  proceso juntarPapeles(ES cant:numero)
  comenzar
    mientras HayPapelEnLaEsquina
      cant:= cant + 1
      tomarPapel
  fin
  proceso hacerEscalon(ES cant:numero; E alto:numero; E ancho:numero)
  comenzar
    repetir alto
      juntarPapeles(cant)
      mover
    derecha
    repetir ancho
      juntarPapeles(cant)
      mover
    repetir 3
      derecha
  fin
  proceso dejarPapeles
  variables
    av,ca:numero
  comenzar
    av:=PosAv
    ca:=PosCa
    mientras HayPapelEnLaBolsa
      BloquearEsquina(100,100)
      Pos(100,100)
      depositarPapel
      Pos(av,ca)
      LiberarEsquina(100,100)
  fin
  proceso calcMax(ES max:numero)
  variables
    c1,c2,c3,max,id:numero
  comenzar
    repetir 3
      RecibirMensaje(id,*)
      si(id = 1)
        RecibirMensaje(c1,r1)
        Informar(c1)
      sino
        si(id = 2)
          RecibirMensaje(c2,r2)
          Informar(c2)
        sino
          RecibirMensaje(c3,r3)
          Informar(c3)
    si((c1 > c2) & (c2 > c3))
      max:= 1
    sino
      si(c2 > c3)
        max:= 2
      sino
        max:= 3
  fin
  proceso enviarDatos
  variables
    alto,ancho:numero
  comenzar
    EnviarMensaje(1,r1)
    Random(alto,1,4)
    Random(ancho,1,3)
    EnviarMensaje(alto,r1)
    EnviarMensaje(ancho,r1)
    EnviarMensaje(2,r2)
    Random(alto,1,4)
    Random(ancho,1,3)
    EnviarMensaje(alto,r2)
    EnviarMensaje(ancho,r2)
    EnviarMensaje(3,r3)
    Random(alto,1,4)
    Random(ancho,1,3)
    EnviarMensaje(alto,r3)
    EnviarMensaje(ancho,r3)
  fin
areas
  c1: AreaP (2,1,14,16)
  c2: AreaP (32,1,44,16)
  c3: AreaP (62,1,74,16)
  cF: AreaP (1,1,1,1)
  dep: AreaPC (100,100,100,100)
robots
  robot papelero
  variables
    id,alto,ancho,cant:numero
  comenzar
    cant:=0
    RecibirMensaje(id,rF)
    RecibirMensaje(alto,rF)
    RecibirMensaje(ancho,rF)
    repetir 3
      hacerEscalon(cant,alto,ancho)
    dejarPapeles
    EnviarMensaje(id,rF)
    EnviarMensaje(cant,rF)
  fin
  robot fiscal
  variables
    max:numero
  comenzar
    max:=0
    enviarDatos
    calcMax(max)
    Informar('Gano el r', max)
  fin
variables
  r1: papelero
  r2: papelero
  r3: papelero
  rF: fiscal
comenzar
  AsignarArea(r1, c1)
  AsignarArea(r2, c2)
  AsignarArea(r3, c3)
  AsignarArea(rF, cF)
  AsignarArea(r1, dep)
  AsignarArea(r2, dep)
  AsignarArea(r3, dep)
  AsignarArea(rF, dep)
  Iniciar(r1, 2,1)
  Iniciar(r2, 32,1)
  Iniciar(r3, 62,1)
  Iniciar(rF, 1,1)
fin
